integrations:
  node_exporter:
    enabled: true
    relabel_configs:
    - replacement: hostname
      target_label: instance
  prometheus_remote_write:
  - basic_auth:
      password: <your grafana.com password>
      username: <your grafana.com username>
    url: <your prometheus push endpoint>
logs:
  configs:
  - name: integrations/apache-solr
    clients:
      - url: <your loki push endpoint>
    positions:
      filename: /tmp/positions.yaml
    target_config:
      sync_period: 10s
    scrape_configs:
    - job_name: integrations/apache-solr
      static_configs:
        - targets:
          - localhost
          labels:
            job: integrations/apache-solr
            instance: <your instance name>
            solr_cluster: <your solr cluster name>
            __path__: <your solr log path>
      pipeline_stages:
        - multiline:
            firstline: '^\d{4}-\d{2}-\d{2} \d{2}:\d{2}:\d{2}\.\d{3}'
        - regex:
            expression: '^\d{4}-\d{2}-\d{2} \d{2}:\d{2}:\d{2}\.\d{3} (?P<level>\w+)'
        - labels:
            level:
metrics:
  configs:
  - name: integrations/apache-solr
    remote_write:
    - basic_auth:
        password: <your grafana.com password>
        username: <your grafana.com username>
      url: <your prometheus push endpoint>
    scrape_configs:
    - job_name: integrations/apache-solr
      metrics_path: /metrics
      static_configs:
      - targets: ["<your solr host>:<your solr port>"]
        labels:
          solr_cluster: <your solr cluster name>

  global:
    scrape_interval: 60s
  wal_directory: /tmp/grafana-agent-wal
